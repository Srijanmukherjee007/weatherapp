(this["webpackJsonpreact-task"]=this["webpackJsonpreact-task"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),i=c.n(s),a=c(6),r=c.n(a),l=(c(12),c(2)),j=(c(13),c(14),c.p+"static/media/spinner.09b325e5.svg"),o=(c(15),c(16),c(17),c(3)),d=c(4),u=c.n(d),b="79b808da8713b930ee9c6ccd586b66d5";function h(e){return e>=348.75||e<11.75?"n":e>=11.75&&e<33.75?"nne":e>=33.75&&e<56.25?"ne":e>=56.25&&e<78.75?"ene":e>=78.75&&e<101.25?"e":e>=101.25&&e<123.75?"ese":e>=123.75&&e<146.25?"se":e>=146.25&&e<168.75?"sse":e>=168.75&&e<191.25?"s":e>=191.25&&e<213.75?"ssw":e>=213.75&&e<236.25?"sw":e>=236.25&&e<258.75?"wsw":e>=258.75&&e<281.25?"w":e>=281.25&&e<303.75?"wnw":e>=303.75&&e<326.25?"nw":e>=326.25&&e<348.75?"nwn":void 0}var O=function(e){var t=e.LatLong,c=e.onLocationChange,i=Object(s.useState)(!0),a=Object(l.a)(i,2),r=a[0],d=a[1],O=Object(s.useState)(null),m=Object(l.a)(O,2),x=m[0],f=m[1],p=Object(s.useState)(null),v=Object(l.a)(p,2),w=v[0],g=v[1],N=Object(s.useState)(!1),y=Object(l.a)(N,2),S=y[0],C=y[1],E=Object(s.useState)(!1),T=Object(l.a)(E,2),D=T[0],M=T[1],P=Object(s.useState)(null),H=Object(l.a)(P,2),I=H[0],L=H[1],W=Object(s.useState)("Next 3 days"),k=Object(l.a)(W,2),U=k[0],R=k[1],F=Object(s.useState)(null),J=Object(l.a)(F,2),z=J[0],A=J[1];Object(s.useEffect)((function(){(function(e){var t=e.lat,c=e.lng;return new Promise((function(e,n){fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t,"&lon=").concat(c,"&appid=").concat(b)).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then(e).catch(n)}))})(t).then((function(e){g(null),f(e),c(e.sys.country)})).catch((function(e){g("Could not get weather information")}))}),[t]),Object(s.useEffect)((function(){null!=x&&d(!1)}),[x]),Object(s.useEffect)((function(){null!=w&&d(!1)}),[w]);var _=function(){return Object(n.jsx)("div",{className:"Spinner",children:Object(n.jsx)("img",{src:j})})};function B(e){if(S)R("Next 3 Days"),M(!1),C(!1),L(null),A(null);else{M(!0),C(!0),R("Hide Forcast");var c=function(e){return Math.floor(e-273.15)};(function(e){var t=e.lat,c=e.lng;return new Promise((function(e,n){fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(c,"&appid=").concat(b)).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then(e).catch(n)}))})(t).then((function(e){for(var t=[],n=e.daily,s=0;s<3;s++){var i=n[s],a=i.temp,r=i.pressure,l=i.humidity,j=i.wind_speed,o=i.wind_deg,d=i.weather,u=a.morn,b=a.day,O=a.eve,m=a.night,x=d[0],f=x.icon,p=x.description,v={mornTemp:c(u),dayTemp:c(b),eveTemp:c(O),nightTemp:c(m),pressure:Math.round(.75006*r*10)/10,windCardinal:h(o),windSpeed:j,humidity:l,weatherIcon:f,description:p};t.push(v)}A(null),L(t)})).catch((function(e){A("Could not retrieve forcast data")}))}}Object(s.useEffect)((function(){null!=I&&1==D&&M(!1)}),[I]),Object(s.useEffect)((function(){null!=z&&1==D&&(M(!1),L(null))}),[z]);var G=function(){var e=[];return I.map((function(t){var c="http://openweathermap.org/img/wn/".concat(t.weatherIcon,"@2x.png"),s="wi wi-wind wi-from-".concat(t.windCardinal),i=t.windCardinal.toUpperCase();e.push(Object(n.jsxs)("div",{className:"Data col-sm-12",children:[Object(n.jsxs)("div",{class:"Temp",children:[Object(n.jsxs)("div",{class:"Heading",children:["Temperature (",Object(n.jsx)("i",{className:"wi wi-celsius"}),")"]}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Time"}),Object(n.jsx)("th",{children:"Temperature"})]})}),Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Morning"}),Object(n.jsx)("td",{children:t.mornTemp})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Day"}),Object(n.jsx)("td",{children:t.dayTemp})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Evening"}),Object(n.jsx)("td",{children:t.eveTemp})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Night"}),Object(n.jsx)("td",{children:t.nightTemp})]})]})]})]}),Object(n.jsxs)("div",{class:"PressureHumidityWind",children:[Object(n.jsx)("div",{className:"Heading",children:"Atmosphere"}),Object(n.jsxs)("div",{className:"Container",children:[Object(n.jsxs)("div",{className:"item",title:"Humidity",children:[Object(n.jsx)("i",{className:"wi wi-humidity"})," ",t.humidity,"%"]}),Object(n.jsxs)("div",{className:"item",title:"Pressure",children:[Object(n.jsx)("i",{className:"wi wi-barometer"})," ",t.pressure," mmHg"]}),Object(n.jsxs)("div",{className:"item",title:"Wind",children:[Object(n.jsx)("i",{className:s})," ",t.windSpeed,"m/s ",i]})]})]}),Object(n.jsxs)("div",{className:"WeatherInfo",children:[Object(n.jsx)("div",{className:"Heading",children:"Weather"}),Object(n.jsxs)("div",{className:"Container",children:[Object(n.jsx)("div",{className:"Icon",children:Object(n.jsx)("img",{src:c,title:t.description,alt:t.description})}),Object(n.jsx)("div",{className:"Description",children:t.description})]})]})]}))})),Object(n.jsxs)("div",{class:"ForcastData",children:[Object(n.jsx)("h4",{children:"3 Days Forcast"}),Object(n.jsx)("div",{class:"DataContainer row",children:e})]})},V=function(e){var t=e.text;return Object(n.jsxs)("div",{class:"Error",children:[Object(n.jsx)(o.Icon,{icon:u.a,className:"Icon"}),t]})},q=function(){var e=x.main,t=x.name,c=x.weather,s=x.wind,i=e.temp,a=e.feels_like,r=e.pressure,l=e.humidity,j=Math.floor(i-273.15),o=Math.floor(a-273.15),d=c[0],u=d.icon,b=d.description,O=s.deg,m=s.speed,f="http://openweathermap.org/img/wn/".concat(u,"@2x.png"),p=Math.round(.75006*r*10)/10,v=h(O),w="wi wi-wind wi-from-".concat(v),g=v.toUpperCase();return Object(n.jsxs)("div",{className:"WeatherData",children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("div",{className:"place",children:t}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"forcastBtn",onClick:B,children:U})})]}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("div",{className:"temp centi",children:j}),Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:f,title:b,alt:b})})]}),Object(n.jsxs)("div",{className:"footer",children:[Object(n.jsxs)("div",{className:"item",title:"Humidity",children:[Object(n.jsx)("i",{className:"wi wi-humidity"})," ",l,"%"]}),Object(n.jsxs)("div",{className:"item",title:"Pressure",children:[Object(n.jsx)("i",{className:"wi wi-barometer"})," ",p," mmHg"]}),Object(n.jsxs)("div",{className:"item",title:"Feels Like",children:[Object(n.jsx)("i",{className:"wi wi-thermometer-exterior"})," ",o,Object(n.jsx)("i",{className:"wi wi-celsius"})]}),Object(n.jsxs)("div",{className:"item",title:"Wind",children:[Object(n.jsx)("i",{className:w})," ",m,"m/s ",g]})]}),Object(n.jsx)("div",{className:"forcast",children:S&&(D?Object(n.jsx)(_,{}):I&&null==z?Object(n.jsx)(G,{}):Object(n.jsx)(V,{text:z}))})]})};return Object(n.jsx)("div",{className:"Weather",children:r?Object(n.jsx)(_,{}):x&&null==w?Object(n.jsx)(q,{}):Object(n.jsx)(V,{text:w})})};function m(e){var t=e.zoom,c=void 0===t?14:t,i=e.center,a=e.style,r=void 0===a?{}:a,j=Object(s.useRef)(),o=Object(s.useState)(null),d=Object(l.a)(o,2),u=d[0],b=d[1],h=Object(s.useState)(null),O=Object(l.a)(h,2),m=O[0],x=O[1];return Object(s.useEffect)((function(){google.maps.event.addDomListener(window,"load",(function(){b(new google.maps.Map(j.current,{zoom:c,center:i}))}))}),[]),Object(s.useEffect)((function(){null!=m||null==u?null!=u&&null!=m&&(u.setCenter(i),m.setVisible(!0),m.setPosition(i)):x(new google.maps.Marker({map:u}))}),[i,u,m]),Object(n.jsx)("div",{ref:j,style:r})}c(18);function x(e){var t=e.countryCode,c=Object(s.useState)(null),i=Object(l.a)(c,2),a=i[0],r=i[1],d=Object(s.useState)(null),b=Object(l.a)(d,2),h=b[0],O=b[1],m=Object(s.useState)(!0),x=Object(l.a)(m,2),f=x[0],p=x[1],v=Object(s.useState)(null),w=Object(l.a)(v,2),g=w[0],N=w[1];Object(s.useEffect)((function(){null==a&&new Promise((function(e,t){fetch("https://api.exchangeratesapi.io/latest?base=EUR").then((function(e){return e.json()})).then(e).catch(t)})).then((function(e){r(e)})).catch((function(){N("Exchange Rates could not be loaded"),p(!1)}))}),[]),Object(s.useEffect)((function(){a&&!h&&t&&function(e){return new Promise((function(t,c){fetch("https://restcountries.eu/rest/v2/alpha/"+e).then((function(e){return e.json()})).then(t).catch(c)}))}(t).then((function(e){if("currencies"in e){var t,c,n=e.currencies[0],s=n.code,i=n.symbol,r=a.rates,l=a.base;if(s in r)t=1/r[s],c=r.USD*t;else s==l&&(t=1,c=r.USD);O({from:s,symbol:i,to:{eur:t,usd:c}}),p(!1)}else N("Currency cannot be converted"),p(!1)})).catch((function(e){N("Could not get current details of country"),p(!1)}))}),[t,a]),Object(s.useEffect)((function(){}),[h]);var y=function(){var e=Math.round(1e3*h.to.eur)/1e3,t=Math.round(1e3*h.to.usd)/1e3;return Object(n.jsxs)("div",{className:"Exchange",children:[Object(n.jsx)("h2",{children:"Exchange Rates"}),Object(n.jsx)("div",{className:"From",title:"from",children:h.from}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Currency"}),Object(n.jsxs)("th",{children:["Price (",h.symbol,")"]})]})}),Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"USD"}),Object(n.jsx)("td",{children:t})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"EUR"}),Object(n.jsx)("td",{children:e})]})]})]})]})},S=function(){return Object(n.jsx)("div",{className:"Spinner",children:Object(n.jsx)("img",{src:j,alt:"Loading"})})},C=function(){return Object(n.jsxs)("div",{className:"Error",children:[Object(n.jsx)(o.Icon,{icon:u.a,className:"Icon"}),g]})};return Object(n.jsx)("div",{className:"Currency",children:f?Object(n.jsx)(S,{}):g?Object(n.jsx)(C,{}):Object(n.jsx)(y,{})})}c(19);var f=function(){var e=Object(s.useState)({lat:51.5074,lng:-.1278}),t=Object(l.a)(e,2),c=t[0],i=t[1],a=Object(s.useState)(null),r=Object(l.a)(a,2),j=r[0],o=r[1],d=Object(s.useState)(null),u=Object(l.a)(d,2),b=u[0],h=u[1];function f(e){i({lat:e.coords.latitude,lng:e.coords.longitude})}function p(e){h("Could not get location from GPS"),setTimeout((function(){h(null)}),5e3)}Object(s.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(f,p,{maximumAge:1e4,timeout:5e3,enableHighAccuracy:!0})}),[]);var v=function(){return Object(n.jsx)("div",{class:"alert alert-danger alert-dismissible fade show",role:"alert",style:{marginTop:"10px"},children:b})};return Object(n.jsxs)("div",{className:"container-fluid",children:[b&&Object(n.jsx)(v,{}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"weather-container col-sm-12 col-lg-4",children:[Object(n.jsx)(O,{className:"Weather",LatLong:c,onLocationChange:function(e){o(e)}}),Object(n.jsx)(x,{countryCode:j})]}),Object(n.jsx)("div",{className:"col-sm-12 col-lg-8",children:Object(n.jsx)(m,{className:"map",zoom:14,center:c,style:{width:"100%",height:"500px",borderRadius:"12px"}})})]})]})};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(f,{})}),document.getElementById("root")),document.title="Weather Console"}],[[20,1,2]]]);
//# sourceMappingURL=main.19c35452.chunk.js.map